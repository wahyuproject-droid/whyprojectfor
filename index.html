<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>WhyProject - Admin</title>
  <style>
    body { font-family:'Segoe UI',sans-serif; background:#0f2027; margin:0; color:white; }
    header { background:#111; padding:15px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.6); }
    header h2{ margin:0; color:#00eaff; }
    main{ padding:20px; }

    .stats{ display:flex; justify-content:space-around; margin:20px 0; }
    .stat{ background:rgba(255,255,255,0.1); padding:20px; border-radius:12px; text-align:center; flex:1; margin:0 10px; }
    .stat h3{ margin:0; color:#00eaff; }

    .order{ background:rgba(255,255,255,0.12); padding:15px; margin:15px 0; border-radius:12px; border-left:5px solid #00eaff; }
    button{ padding:8px 15px; border:none; border-radius:8px; margin:5px; cursor:pointer; font-weight:bold; }
    .btn-proses{ background:#00eaff; color:#111; }
    .btn-selesai{ background:#4caf50; color:white; }
  </style>
</head>
<body>
  <header><h2>ðŸ“Š Admin Dashboard - WhyProject</h2></header>
  <main>
    <div class="stats">
      <div class="stat"><h3 id="total">0</h3>Total Order</div>
      <div class="stat"><h3 id="menunggu">0</h3>Menunggu</div>
      <div class="stat"><h3 id="proses">0</h3>Diproses</div>
      <div class="stat"><h3 id="selesai">0</h3>Selesai</div>
    </div>
    <div id="listOrder"></div>
  </main>

  <script>
    function loadOrders(){
      let orders=JSON.parse(localStorage.getItem("orders")||"[]"), html="";
      let menunggu=0, proses=0, selesai=0;
      orders.forEach(o=>{
        if(o.status==="Menunggu Admin") menunggu++;
        else if(o.status==="Diproses") proses++;
        else if(o.status==="Selesai") selesai++;
        html+=`
          <div class="order">
            <b>${o.id}</b><br>User: ${o.username}<br>
            Gunung: ${o.gunung}, Summit: ${o.jumlah}<br>
            Total: Rp${o.total}<br>
            Status: <b>${o.status}</b><br>
            WA: ${o.whatsapp}<br>
            <button class="btn-proses" onclick="updateStatus('${o.id}','Diproses','${o.whatsapp}')">Proses</button>
            <button class="btn-selesai" onclick="updateStatus('${o.id}','Selesai','${o.whatsapp}')">Selesai</button>
          </div>`;
      });
      document.getElementById("listOrder").innerHTML=html;
      document.getElementById("total").innerText=orders.length;
      document.getElementById("menunggu").innerText=menunggu;
      document.getElementById("proses").innerText=proses;
      document.getElementById("selesai").innerText=selesai;
    }

    function updateStatus(id,status,wa){
      let orders=JSON.parse(localStorage.getItem("orders")||"[]");
      let i=orders.findIndex(o=>o.id===id);
      if(i!==-1){ orders[i].status=status; localStorage.setItem("orders",JSON.stringify(orders)); 
        alert("ðŸ“© WA dikirim ke "+wa+" untuk status: "+status); 
        loadOrders(); }
    }

    loadOrders();
  </script>
</body>
</html>
